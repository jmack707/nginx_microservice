---
- name: Playbook for Using a Variety of Tower Modules
  hosts: master
  gather_facts: false
  

  collections:
    - kubernetes.core

  tasks:

  - name: Ensure Pip is installed
    ansible.builtin.package:
      name: python3-pip
      state: present
    become: true

  - name: Ensure Kubernetes is installed
    pip:
      name: 
        - Kubernetes==11
        - PyYAML
      state: present
    become: true

  - name: Get a list of all pods from any namespace
    kubernetes.core.k8s_info:
      kind: pods
    register: pods_list
    
  - name: View Results
    debug:
      var: pods_list
