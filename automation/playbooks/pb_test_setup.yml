---
- name: Playbook for Using a Variety of Tower Modules
  hosts: nodes
  gather_facts: false
  become: true

  tasks:

  - name: Ensure Pip is installed
    ansible.builtin.package:
      name: python3-pip
      state: present

  - name: Ensure Kubernetes is installed
    pip:
      name: Kubernetes
      state: present

  - name: Get a list of all pods from any namespace
    community.kubernetes.k8s_info:
      kind: pods
    register: pods_list
